# Lab2 – Pizza Enterprise Domain

Лабораторная работа по варианту «Пиццерия». Код организован по доменным подпакетам (`communication`, `errors`, `hr`, `finance`, `marketing`, `logistics`, `production`,  `sales`, `storage`), в каждом файле объявлена ровно одна структура и связанные методы. Пакет `pizzeria` экспортирует типы из подпакетов, поэтому тесты и внешние клиенты продолжают работать через один импорт.

## Как запустить тесты и покрытие

```bash
cd Lab2
go test ./... -cover
# с расчётом покрытия >85%
```
или

```bash
cd Lab2
go test ./... -coverpkg=./... -coverprofile=coverage.out
go tool cover -func=coverage.out
```

## Сводка по классам

1. **EmailAccount** – управление корпоративной почтой сотрудников.
2. **EmployeeTask** – задачи сотрудника с метаданными статуса.
3. **Status** – уровень и заметки состояния объектов.
4. **Employee** – данные о сотруднике, выдача поручений и прав.
5. **Permission** – флаги доступа к операциям.
6. **Team** – команды и загрузка по вместимости.
7. **HRDepartment** – учёт кадров и отбор прав.
8. **IDGenerator** – генератор уникальных идентификаторов.
9. **Budget** – контроль лимитов и распределения.
10. **Currency** – работа с курсами и форматированием.
11. **BankAccount** – операции по счетам.
12. **Receipt** – фиксация закупок и итогов.
13. **CurrencyConverter** – кросс-курсы между валютами.
14. **Transaction** – перевод средств с проверкой ошибок.
15. **AccountingDepartment** – проводки и баланс по владельцам.
16. **Country** – данные по странам и налогам.
17. **Advertisement** – рекламные материалы и каналы.
18. **AdvertisingChannel** – планирование размещений.
19. **MarketingCampaign** – бюджет кампании, цели и траты.
20. **CampaignReport** – метрики эффективности.
21. **MarketingDepartment** – портфель кампаний.
22. **Warehouse** – размещение грузов и загрузка складов.
23. **Material** – остатки ингредиентов.
24. **Product** – пиццы и списки ингредиентов.
25. **Cargo** – транспортные единицы.
26. **LogisticsCenter** – маршрутизация и планы сортировки.
27. **LogisticsDepartment** – отправка и статистика доставок.
28. **CargoSortingPlan** – группировка грузов по складам.
29. **Route** – маршруты, остановки и расчёт времени.
30. **VehicleType** – параметры транспорта.
31. **WeightMap** – учёт весов объектов.
32. **Vehicle** – загрузка и контроль перегруза машин.
33. **Carrier** – перевозчики и расписание рейсов.
34. **Shipment** – партии доставки.
35. **TechnologicalCard** – технологические карты продуктов.
36. **ProductionOrder** – производственные заказы.
37. **ProductionUnit** – производственные узлы.
38. **ProductionLine** – линии с очередью заказов.
39. **ProductionPlan** – потребности в материалах.
40. **Factory** – совокупность складов и линий.
41. **OrderItem** – позиция клиентского заказа.
42. **Order** – заказ клиента с проверками.
43. **Invoice** – выставленный счёт.
44. **Delivery** – доставка заказа по маршруту.
45. **Customer** – данные клиента и его заказы.
46. **SalesDepartment** – контроль заказов/доставок; теперь опирается на абстрактные сервисы хранения (`Storage`) и уведомлений (`Notifier`).
47. **Supplier** – поставщики материалов и продуктов.
48. **Contract** – соглашения с поставщиками.
49. **PurchaseOrder** – закупочные заказы.
50. **ProcurementDepartment** – согласование заказов и контрактов.
51. **Storage (interface)** / **MemoryStorage** – абстрактное хранилище и реализация в памяти, используются отделом продаж.
52. **Notifier (interface)** / **EmailNotifier** – абстракция уведомлений и реализация e-mail уведомителя.

Каждый из 50+ классов/интерфейсов имеет уникальные поля/поведения, суммарно реализовано >150 полей и >100 поведенческих методов. Пакеты активно ассоциированы между собой (например, `sales` использует `hr`, `logistics`, `marketing`, а также абстрактные сервисы `storage` и `communication`), что даёт требуемые >30 примеров включения и демонстрацию полиморфизма через интерфейсы.

## Исключения

12 персональных исключений описаны в `pizzeria/errors/*.go` и используются в соответствующих сценариях: блокировка почты, повторное завершение задач, переполнение бюджета, нехватка валютных курсов, ошибки поставщиков и т.д. В тестах явно проверяются как успешные, так и ошибочные ветки, что обеспечивает покрытие >91% по команде выше.

